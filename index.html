<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tasas de Cambio</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css" rel="stylesheet">  
</head>
<body>

   <div class="jumbotron">
    <div class="jumbotron-content">
        <h1>游눯Tasas de Cambio de Divisas 游늴 </h1>
        <img src="https://avatars.githubusercontent.com/u/38921558?v=4" alt="Tasas de Cambio" class="jumbotron-img">
    </div>
</div>

    
    <div class="search-container">
        <input type="text" id="search-input" placeholder="Buscar por c칩digo de moneda..." onkeyup="filterTable()">
    </div>
    
    <table>
        <thead>
            <tr>
                <th>Bandera</th>
                <th>Pa칤s</th>
                <th>Moneda</th>
                <th>Tasa de Cambio (1 USD)</th>
            </tr>
        </thead>
        <tbody id="currency-list"></tbody>
    </table>

    <script>
        const urls = [
            'https://gist.githubusercontent.com/Andres2D/5a6711f4e6701d411af9333cc84ecd1a/raw/1c1bb735b9664510fdd3186e2d6d94025cf550e9/country-flags-svg.json',
            'https://gist.githubusercontent.com/JuninhoFreitas/8bf9b82f70383e3a551cc848ce53b06c/raw/796dc4e2fa8db49b981e25fae57d32b52c1d9420/countries.json'
        ];

        const countryNames = {
            AED: "Emiratos 츼rabes Unidos",
            AFN: "Afganist치n",
            ALL: "Albania",
            AMD: "Armenia",
            ANG: "Curazao",
            AOA: "Angola",
            ARS: "Rep칰blica Argentina",
            AUD: "Mancomunidad de Australia",
            AWG: "Aruba",
            AZN: "Azerbaiy치n",
            BAM: "Bosnia y Herzegovina",
            BBD: "Barbados",
            BDT: "Rep칰blica Popular de Banglad칠s",
            BGN: "Rep칰blica de Bulgaria",
            BHD: "Reino de Bar칠in",
            BIF: "Rep칰blica de Burundi",
            BMD: "Bermudas",
            BND: "Brun칠i",
            BOB: "Estado Plurinacional de Bolivia",
            BRL: "Rep칰blica Federativa del Brasil",
            BSD: "Mancomunidad de las Bahamas",
            BTN: "Reino de But치n",
            BWP: "Rep칰blica de Botsuana",
            BYN: "Rep칰blica de Bielorrusia",
            BZD: "Belice",
            CAD: "Canad치",
            CDF: "Rep칰blica Democr치tica del Congo",
            CHF: "Confederaci칩n Suiza",
            CLP: "Rep칰blica de Chile",
            CNY: "Rep칰blica Popular China",
            COP: "Rep칰blica de Colombia",
            CRC: "Rep칰blica de Costa Rica",
            CUP: "Rep칰blica de Cuba",
            CVE: "Rep칰blica de Cabo Verde",
            CZK: "Rep칰blica Checa",
            DJF: "Rep칰blica de Yibuti",
            DKK: "Reino de Dinamarca",
            DOP: "Rep칰blica Dominicana",
            DZD: "Rep칰blica Argelina Democr치tica y Popular",
            EGP: "Rep칰blica 츼rabe de Egipto",
            ERN: "Estado de Eritrea",
            ETB: "Rep칰blica Democr치tica Federal de Etiop칤a",
            EUR: "Uni칩n Europea",
            FJD: "Rep칰blica de Fiyi",
            FKP: "Islas Malvinas",
            FOK: "Islas Feroe",
            GBP: "Reino Unido de Gran Breta침a e Irlanda del Norte",
            GEL: "Georgia",
            GGP: "Bail칤a de Guernsey",
            GHS: "Rep칰blica de Ghana",
            GIP: "Gibraltar",
            GMD: "Rep칰blica de Gambia",
            GNF: "Rep칰blica de Guinea",
            GTQ: "Rep칰blica de Guatemala",
            GYD: "Rep칰blica Cooperativa de Guyana",
            HKD: "Regi칩n Administrativa Especial de Hong Kong",
            HNL: "Rep칰blica de Honduras",
            HRK: "Rep칰blica de Croacia",
            HTG: "Rep칰blica de Hait칤",
            HUF: "Hungr칤a",
            IDR: "Rep칰blica de Indonesia",
            ILS: "Estado de Israel",
            IMP: "Isla de Man",
            INR: "Rep칰blica de la India",
            IQD: "Rep칰blica de Irak",
            IRR: "Rep칰blica Isl치mica de Ir치n",
            ISK: "Rep칰blica de Islandia",
            JEP: "Jersey",
            JMD: "Jamaica",
            JOD: "Reino Hachemita de Jordania",
            JPY: "Estado de Jap칩n",
            KES: "Rep칰blica de Kenia",
            KGS: "Rep칰blica Kirguisa",
            KHR: "Reino de Camboya",
            KID: "Islas Kiribati",
            KMF: "Uni칩n de las Comoras",
            KRW: "Rep칰blica de Corea",
            KWD: "Estado de Kuwait",
            KYD: "Islas Caim치n",
            KZT: "Rep칰blica de Kazajist치n",
            LAK: "Rep칰blica Democr치tica Popular Lao",
            LBP: "Rep칰blica Libanesa",
            LKR: "Rep칰blica Democr치tica Socialista de Sri Lanka",
            LRD: "Rep칰blica de Liberia",
            LSL: "Reino de Lesoto",
            LYD: "Estado de Libia",
            MAD: "Reino de Marruecos",
            MDL: "Rep칰blica de Moldavia",
            MGA: "Rep칰blica de Madagascar",
            MKD: "Rep칰blica de Macedonia del Norte",
            MMK: "Rep칰blica de la Uni칩n de Myanmar",
            MNT: "Mongolia",
            MOP: "Regi칩n Administrativa Especial de Macao",
            MRU: "Rep칰blica Isl치mica de Mauritania",
            MUR: "Rep칰blica de Mauricio",
            MVR: "Rep칰blica de Maldivas",
            MWK: "Rep칰blica de Malaui",
            MXN: "Estados Unidos Mexicanos",
            MYR: "Malasia",
            MZN: "Rep칰blica de Mozambique",
            NAD: "Rep칰blica de Namibia",
            NGN: "Rep칰blica Federal de Nigeria",
            NIO: "Rep칰blica de Nicaragua",
            NOK: "Reino de Noruega",
            NPR: "Rep칰blica Democr치tica Federal de Nepal",
            NZD: "Nueva Zelanda",
            OMR: "Sultanato de Om치n",
            PAB: "Rep칰blica de Panam치",
            PEN: "Rep칰blica del Per칰",
            PGK: "Estado Independiente de Pap칰a Nueva Guinea",
            PHP: "Rep칰blica de Filipinas",
            PKR: "Rep칰blica Isl치mica de Pakist치n",
            PLN: "Rep칰blica de Polonia",
            PYG: "Rep칰blica del Paraguay",
            QAR: "Estado de Catar",
            RON: "Rumania",
            RSD: "Rep칰blica de Serbia",
            RUB: "Federaci칩n de Rusia",
            RWF: "Rep칰blica de Ruanda",
            SAR: "Reino de Arabia Saudita",
            SBD: "Islas Salom칩n",
            SCR: "Rep칰blica de Seychelles",
            SDG: "Rep칰blica de Sud치n",
            SEK: "Reino de Suecia",
            SGD: "Rep칰blica de Singapur",
            SHP: "Santa Elena, Ascensi칩n y Trist치n de Acu침a",
            SLE: "Rep칰blica de Sierra Leona",
            SOS: "Rep칰blica Federal de Somalia",
            SRD: "Rep칰blica de Surinam",
            SSP: "Rep칰blica de Sud치n del Sur",
            STN: "Rep칰blica Democr치tica de Santo Tom칠 y Pr칤ncipe",
            SYP: "Rep칰blica 츼rabe Siria",
            SZL: "Reino de Esuatini",
            THB: "Reino de Tailandia",
            TJS: "Rep칰blica de Tayikist치n",
            TMT: "Turkmenist치n",
            TND: "Rep칰blica Tunecina",
            TOP: "Reino de Tonga",
            TRY: "Rep칰blica de Turqu칤a",
            TTD: "Rep칰blica de Trinidad y Tobago",
            TVD: "Tuvalu",
            TWD: "Rep칰blica de China (Taiw치n)",
            TZS: "Rep칰blica Unida de Tanzania",
            UAH: "Ucrania",
            UGX: "Rep칰blica de Uganda",
            USD: "Estados Unidos de Am칠rica",
            UYU: "Rep칰blica Oriental del Uruguay",
            UZS: "Rep칰blica de Uzbekist치n",
            VES: "Rep칰blica Bolivariana de Venezuela",
            VND: "Rep칰blica Socialista de Vietnam",
            VUV: "Rep칰blica de Vanuatu",
            WST: "Estado Independiente de Samoa",
            XAF: "Comunidad Econ칩mica y Monetaria de 츼frica Central",
            XCD: "Organizaci칩n de Estados del Caribe Oriental",
            XDR: "Fondo Monetario Internacional",
            XOF: "Uni칩n Econ칩mica y Monetaria de 츼frica Occidental",
            XPF: "Territorios Franceses del Pac칤fico",
            YER: "Rep칰blica de Yemen",
            ZAR: "Rep칰blica de Sud치frica",
            ZMW: "Rep칰blica de Zambia",
            ZWL: "Rep칰blica de Zimbabue"
        };

        async function fetchCountryData() {
            let countryData = null;
            for (const url of urls) {
                try {
                    const response = await fetch(url);
                    if (!response.ok) throw new Error(`Error: ${response.status}`);
                    countryData = await response.json();
                    break;
                } catch (error) {
                    console.warn(`Error al cargar datos desde ${url}:`, error);
                }
            }
            return countryData;
        }

        async function fetchExchangeRates() {
            try {
                const response = await fetch('https://api.exchangerate-api.com/v4/latest/USD');
                if (!response.ok) throw new Error(`Error: ${response.status}`);
                return response.json();
            } catch (error) {
                console.error('Error al obtener las tasas de cambio:', error);
                return null;
            }
        }

        async function populateCurrencyTable() {
            const countryData = await fetchCountryData();
            const exchangeRates = await fetchExchangeRates();
            const currencyList = document.getElementById('currency-list');

            if (!countryData || !exchangeRates) {
                const errorRow = document.createElement('tr');
                errorRow.innerHTML = '<td colspan="4">Hubo un error al cargar los datos. Int칠ntalo de nuevo m치s tarde.</td>';
                currencyList.appendChild(errorRow);
                return;
            }

            const countries = {};
            
            countryData.forEach(item => {
                const currencyCode = item.Currencies ? item.Currencies[0].code : item.currencyCode;
                const currencyName = item.Currencies ? item.Currencies[0].name : item.currency;
                countries[currencyCode] = {
                    flag: item.flags ? item.flags.svg : item.flag,
                    countryName: countryNames[currencyCode] || item.name,
                    currencyName: currencyName,
                    currencyCode: currencyCode
                };
            });

            const addedCurrencies = new Set();

            Object.keys(exchangeRates.rates).forEach(currency => {
                if (!addedCurrencies.has(currency)) {
                    addedCurrencies.add(currency);
                    const rate = exchangeRates.rates[currency];
                    
                    const country = countries[currency] || {
                        flag: `https://flagcdn.com/16x12/${currency.slice(0, 2).toLowerCase()}.png`,
                        countryName: countryNames[currency] || currency,
                        currencyName: currency,
                        currencyCode: currency
                    };

                    const currencyRow = document.createElement('tr');
                    currencyRow.innerHTML = `
                        <td><img src="${country.flag}" alt="${currency}"></td>
                        <td>${countryNames[currency] || 'No disponible'}</td>
                        <td>${country.currencyName} <span class="currency-code">(${country.currencyCode})</span></td>
                        <td>${rate.toFixed(4)}</td>
                    `;
                    currencyList.appendChild(currencyRow);
                }
            });
        }

        function filterTable() {
            const input = document.getElementById('search-input');
            const filter = input.value.toLowerCase();
            const rows = document.querySelectorAll('#currency-list tr');

            rows.forEach(row => {
                const cells = row.getElementsByTagName('td');
                const textContent = Array.from(cells).map(cell => cell.textContent).join(' ').toLowerCase();
                row.style.display = textContent.includes(filter) ? '' : 'none';
            });
        }

        document.addEventListener('DOMContentLoaded', populateCurrencyTable);
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>
</body>
</html>